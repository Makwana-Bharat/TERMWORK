<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>LIVE STORE</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"
    />
    <!-- Custom Font -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      rel="stylesheet"
      type="text/css"
      href="../assets/stylesheet/customCss.css"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Bree+Serif&family=IM+Fell+DW+Pica&family=Tilt+Prism&display=swap"
      rel="stylesheet"
    />
    <!-- SweetAlert-->
    <link
      href="https://cdn.jsdelivr.net/npm/@sweetalert2/theme-dark@4/dark.css"
      rel="stylesheet"
    />
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.js"></script>

    <!-- Tailwind CSS-->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- JQuery-->
    <script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>

    <!-- Configration -->
    <script src="../config.js"></script>
    <!-- State Management -->
    <script src="../assets/js/Auth/COOKIE/setCookie.js"></script>
    <script src="../assets/js/Auth/COOKIE/getCookie.js"></script>
    <script src="../assets/js/Auth/COOKIE/resetCookie.js"></script>

    <!-- Project -->
    <script src="./Projects/Forms/add.js"></script>
    <script src="./Projects/Handler/add.js"></script>
    <script src="./Projects/Handler/project.js"></script>
  </head>

  <body class="h-screen w-screen bg-neutral-200 overflow-hidden">
    <!-- Container  -->
    <main class="h-full w-full bg-neutral-800 flex">
      <!-- Sidenav -->
      <nav
        class="flex flex-col justify-between items-center bg-neutral-900 w-16 h-full p-2 pb-3"
      >
        <div class="w-full">
          <img
            src="https://cdn-icons-png.flaticon.com/512/10490/10490234.png"
            alt=""
          />
        </div>
        <footer
          class="w-full justify-center flex"
          onclick="resetCookie('user')"
        >
          <i
            class="fa-solid fa-power-off text-white hover:text-slate-300"
            style="font-size: 34px"
          ></i>
        </footer>
      </nav>
      <!-- Main Section -->
      <section class="w-full">
        <header class="flex justify-between w-11/12 px-4 py-2 fixed">
          <label
            for=""
            style="font-family: 'Tilt Prism', cursive"
            class="text-white text-2xl"
            >LIVE STORE</label
          >
          <div class="flex relative left-16">
            <div
              class="flex text-white w-fit h-fit pl-2 rounded-3xl items-center justify-between mr-2 bg-neutral-900 cursor-pointer"
            >
              <label
                for="name"
                style="font-family: roboto"
                id="username"
              ></label>
              <img
                class="w-8 m-1"
                src="https://cdn-icons-png.flaticon.com/512/3135/3135715.png"
                alt=""
              />
            </div>
            <i
              onclick="swapScreen()"
              class="fa-solid fa-rotate text-white text-2xl m-1 cursor-pointer hover:text-slate-300"
            ></i>
          </div>
        </header>
        <!-- Search box-->
        <div class="p-4 pt-16 flex justify-center">
          <div
            class="w-3/6 h-14 rounded-3xl pl-4"
            style="
              box-shadow: 2px 2px 1px rgba(0, 0, 0, 0.6), inset 1px 1px 1px gray;
            "
          >
            <input
              type=""
              id="search"
              name="search"
              value=""
              placeholder="search.."
              class="w-11/12 bg-transparent outline-0 h-full text-white text-lg"
              spellcheck="flase"
            />
            <i
              class="fa-solid fa-search text-slate-300 text-lg m-1 hover:text-white cursor-pointer"
            ></i>
          </div>
        </div>
        <!-- Project Section-->
        <main class="mt-10 mx-5" id="projects_Container"></main>
      </section>

      <!-- Add New Project -->
      <button
        type="button"
        class="fixed bottom-5 right-5 text-white bg-gradient-to-r from-blue-500 via-blue-600 to-blue-700 hover:bg-gradient-to-br shadow-lg shadow-blue-500/50 dark:shadow-lg dark:shadow-blue-800/80 font-medium rounded-2xl text-2xl w-14 h-14 flex items-center justify-center"
        onclick="showNewProjectFrm()"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
          class="w-8 h-8"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M12 6v6m0 0v6m0-6h6m-6 0H6"
          ></path>
        </svg>
      </button>
    </main>
    <script>
      function showApp(projectJSON) {
        let Project = JSON.stringify(projectJSON);
        window.location.href = `projectView.html?project=${Project}`;
      }
      //Screen Switching
      const swapScreen = () => (window.location.href = "../");

      $(document).ready(() => {
        /* === Check User Info === */
        const userCookie = getCookie("user");
        if (!userCookie) {
          window.location.href = "../";
        } else {
          try {
            const user = JSON.parse(userCookie);
            Projects(
              ApiEndPoint.Base + ApiEndPoint.Project.Fetch,
              user.UID,
              user.Username
            );

            if (user && user.Username) {
              $("#username").html(user.Username);
            } else {
              alert("Invalid user data");
              swapScreen();
              console.error("Invalid user data:", user);
            }
          } catch (error) {
            alert("Something Wen't Wrong.. , \nPlease Clear your cookies..");
            swapScreen();
            console.error("Error parsing user cookie:", error);
          }
        }

        /* === Load Data === */

        //Most View
      });
    </script>
  </body>
</html>
